
# üöÄ MCP SQL Server: Integre o Claude Desktop ao seu Banco de Dados
-- Claude SQL Bridge: Guia Definitivo para macOS & Windows


Este guia fornece o passo a passo unificado para configurar o **Model Context Protocol (MCP)**, permitindo que o Claude Desktop execute consultas SQL diretamente em inst√¢ncias do **Microsoft SQL Server**.

## üìã 1. Pr√©-requisitos (Ambos os Sistemas)

* **Claude Desktop** instalado.
* **Node.js (v18+)** instalado: Necess√°rio para rodar o servidor MCP.
* **SQL Server** acess√≠vel: Pode ser local, via Docker ou servidor remoto.
* **Conectividade:** Certifique-se de que a porta **1433** est√° aberta no firewall.

---

## üõ†Ô∏è 2. Instala√ß√£o do Servidor MCP

Abra o terminal (Terminal no macOS ou PowerShell/CMD no Windows) e instale o conector globalmente:

```bash
npm install -g @modelcontextprotocol/server-mssql

```

> **Dica:** Verifique o local de instala√ß√£o do Node.js com o comando `which node` (macOS) ou `where node` (Windows) para usar no arquivo de configura√ß√£o.

---

## ‚öôÔ∏è 3. Configura√ß√£o do Claude Desktop

O Claude Desktop utiliza um arquivo JSON para gerenciar os servidores. O conte√∫do √© o mesmo, mas o local do arquivo muda conforme o sistema:

### Caminho do Arquivo:

* **macOS:** `~/Library/Application Support/Claude/claude_desktop_config.json`
* **Windows:** `%APPDATA%\Claude\claude_desktop_config.json`

### Conte√∫do do JSON:

Copie e cole o c√≥digo abaixo, ajustando os caminhos de acordo com seu usu√°rio:

```json
{
  "mcpServers": {
    "sql-server": {
      "command": "node",
      "args": [
        "C:/Users/SEU_USUARIO/AppData/Roaming/npm/node_modules/@modelcontextprotocol/server-mssql/dist/index.js"
      ],
      "env": {
        "MSSQL_CONNECTION_STRING": "Server=SEU_IP,1433;Database=NOME_BANCO;User Id=sa;Password=SUA_SENHA;Encrypt=true;TrustServerCertificate=true;"
      }
    }
  }
}

```

*No **macOS**, o caminho em `args` costuma ser `/usr/local/lib/node_modules/...` ou similar.*

---

## üîç 4. Verifica√ß√£o de Logs e Troubleshooting

Se o √≠cone de ferramenta (martelo) n√£o aparecer no Claude, verifique os logs para diagnosticar erros de conex√£o ou sintaxe.

### Como abrir a pasta de logs:

* **No macOS (Terminal):**
```bash
open ~/Library/Logs/Claude

```


* **No Windows (Executar/Win+R):**
```text
%USERPROFILE%\AppData\Local\Logs\Claude

```



**Arquivos principais:**

* `mcp-server-sql-server.log`: Registra falhas de login ou erros de rede do SQL.
* `claude_desktop.log`: Registra se o Claude conseguiu carregar o Node.js e o arquivo de configura√ß√£o.

---

## üöÄ 5. Executando Consultas

1. **Reinicie o Claude Desktop:** Essencial para carregar novas configura√ß√µes.
2. **Pe√ßa uma consulta:** "Claude, mostre os top 5 produtos da tabela dbo.PRODUTOS".
3. **Autorize o Acesso:** Uma janela de seguran√ßa surgir√°. Clique em **"Permitir uma vez"** ou **"Sempre permitir"**.
4. **Resultado:** O Claude exibir√° os dados formatados em tabela diretamente no chat.

---

## üí° Dicas de Ouro (Checklist)

* **Sintaxe JSON:** No VS Code, verifique se n√£o h√° erros de "End of file expected". O arquivo deve terminar com um fechamento de chave `}` limpo.
* **Seguran√ßa SQL:** Se usar SQL Server local sem certificado SSL oficial, o par√¢metro `TrustServerCertificate=true;` na string de conex√£o √© obrigat√≥rio para evitar erros de handshake.
* **Teste de Rede:** Use `nc -zv IP 1433` (macOS) ou `Test-NetConnection IP -Port 1433` (Windows) para garantir que o banco est√° alcan√ß√°vel.

---
## ü§ù Contribuindo

Formas de contribuir:
- Sugerir melhorias e reportar bugs
- Compartilhar scripts de automa√ß√£o do SEI!

---

üìû Contato
Alexandre
üìß alemiti@gmail.com
‚å®Ô∏è com ‚ù§Ô∏è por [@alemiti7]([https://github.com/alemiti7]) üòä

---
